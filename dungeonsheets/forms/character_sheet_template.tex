[% if use_tex_template %]
\newgeometry{left=0cm,right=0cm,top=0cm,bottom=0cm}
\onecolumn

\setlength\oddsidemargin{\dimexpr(\paperwidth-\textwidth)/2 - 1in\relax}
\setlength\evensidemargin{\oddsidemargin}

% Headline
\CharacterName{[[ character.name ]]}

\Class{[[ character.classes_and_levels ]]}
\Background{[[ character.background ]]}
\PlayerName{[[ character.player_name ]]}
\Race{[[ character.race ]]}
\Alignment{[[ character.alignment ]]}
\XP{[[ character.xp ]]}

% Ability scores
\StrengthScore{[[ character.strength.value ]]}
\DexterityScore{[[ character.dexterity.value ]]}
\ConstitutionScore{[[ character.constitution.value ]]}
\IntelligenceScore{[[ character.intelligence.value ]]}
\WisdomScore{[[ character.wisdom.value ]]}
\CharismaScore{[[ character.charisma.value ]]}

% Ability modifiers
\StrengthModifier{[[ character.strength.modifier ]]}
\DexterityModifier{[[ character.dexterity.modifier ]]}
\ConstitutionModifier{[[ character.constitution.modifier ]]}
\IntelligenceModifier{[[ character.intelligence.modifier ]]}
\WisdomModifier{[[ character.wisdom.modifier ]]}
\CharismaModifier{[[ character.charisma.modifier ]]}

% Saving Throws
\StrengthSavingThrowModifier{[[ character.strength.saving_throw ]]}
\DexteritySavingThrowModifier{[[ character.dexterity.saving_throw ]]}
\ConstitutionSavingThrowModifier{[[ character.constitution.saving_throw ]]}
\IntelligenceSavingThrowModifier{[[ character.intelligence.saving_throw ]]}
\WisdomSavingThrowModifier{[[ character.wisdom.saving_throw ]]}
\CharismaSavingThrowModifier{[[ character.charisma.saving_throw ]]}

\AcrobaticsSkillModifier{[[ character.acrobatics.modifier ]]}
\AnimalHandlingSkillModifier{[[ character.animal_handling.modifier ]]}
\ArcanaSkillModifier{[[ character.arcana.modifier ]]}
\AthleticsSkillModifier{[[ character.athletics.modifier ]]}
\DeceptionSkillModifier{[[ character.deception.modifier ]]}
\HistorySkillModifier{[[ character.history.modifier ]]}
\InsightSkillModifier{[[ character.insight.modifier ]]}
\IntimidationSkillModifier{[[ character.intimidation.modifier ]]}
\InvestigationSkillModifier{[[ character.investigation.modifier ]]}
\MedicineSkillModifier{[[ character.medicine.modifier ]]}
\NatureSkillModifier{[[ character.nature.modifier ]]}
\PerceptionSkillModifier{[[ character.perception.modifier ]]}
\PerformanceSkillModifier{[[ character.performance.modifier ]]}
\PersuasionSkillModifier{[[ character.persuasion.modifier ]]}
\ReligionSkillModifier{[[ character.religion.modifier ]]}
\SleightOfHandSkillModifier{[[ character.sleight_of_hand.modifier ]]}
\StealthSkillModifier{[[ character.stealth.modifier ]]}
\SurvivalSkillModifier{[[ character.survival.modifier ]]}

% Proficiencies
\SetStrengthProficiency{[% if "strength" in character.saving_throw_proficiencies %]1[% else %]0[% endif %]}
\SetDexterityProficiency{[% if "dexterity" in character.saving_throw_proficiencies %]1[% else %]0[% endif %]}
\SetConstitutionProficiency{[% if "constitution" in character.saving_throw_proficiencies %]1[% else %]0[% endif %]}
\SetIntelligenceProficiency{[% if "intelligence" in character.saving_throw_proficiencies %]1[% else %]0[% endif %]}
\SetWisdomProficiency{[% if "wisdom" in character.saving_throw_proficiencies %]1[% else %]0[% endif %]}
\SetCharismaProficiency{[% if "charisma" in character.saving_throw_proficiencies %]1[% else %]0[% endif %]}

\SetAcrobaticsProficiency{[%- if character.acrobatics.is_expertise -%]2
                          [%- elif character.acrobatics.is_proficient -%]1
                          [%- elif character.acrobatics.is_jack_of_all_trades -%]0.5
                          [%- elif character.acrobatics.is_remarkable_athlete -%]0.5
                          [% else %]0[% endif %]}
\SetAnimalHandlingProficiency{[%- if character.animal_handling.is_expertise -%]2
                              [%- elif character.animal_handling.is_proficient -%]1
                              [%- elif character.animal_handling.is_jack_of_all_trades -%]0.5
                              [% else %]0[% endif %]}
\SetArcanaProficiency{[%- if character.arcana.is_expertise -%]2
                      [%- elif character.arcana.is_proficient -%]1
                      [%- elif character.arcana.is_jack_of_all_trades -%]0.5
                      [% else %]0[% endif %]}
\SetAthleticsProficiency{[%- if character.athletics.is_expertise -%]2
                         [%- elif character.athletics.is_proficient -%]1
                         [%- elif character.athletics.is_jack_of_all_trades -%]0.5
                         [%- elif character.athletics.is_remarkable_athlete -%]0.5
                         [% else %]0[% endif %]}
\SetDeceptionProficiency{[%- if character.deception.is_expertise -%]2
                         [%- elif character.deception.is_proficient -%]1
                         [%- elif character.deception.is_jack_of_all_trades -%]0.5
                         [% else %]0[% endif %]}
\SetHistoryProficiency{[%- if character.history.is_expertise -%]2
                       [%- elif character.history.is_proficient -%]1
                       [%- elif character.history.is_jack_of_all_trades -%]0.5
                       [% else %]0[% endif %]}
\SetInsightProficiency{[%- if character.insight.is_expertise -%]2
                       [%- elif character.insight.is_proficient -%]1
                       [%- elif character.insight.is_jack_of_all_trades -%]0.5
                       [% else %]0[% endif %]}
\SetIntimidationProficiency{[%- if character.intimidation.is_expertise -%]2
                            [%- elif character.intimidation.is_proficient -%]1
                            [%- elif character.intimidation.is_jack_of_all_trades -%]0.5
                            [%- else %]0[% endif %]}
\SetInvestigationProficiency{[%- if character.investigation.is_expertise -%]2
                             [%- elif character.investigation.is_proficient -%]1
                             [%- elif character.investigation.is_jack_of_all_trades -%]0.5
                             [% else %]0[% endif %]}
\SetMedicineProficiency{[%- if character.medicine.is_expertise -%]
                        [%- elif character.medicine.is_proficient -%]1
                        [%- elif character.medicine.is_jack_of_all_trades -%]0.5
                        [% else %]0[% endif %]}
\SetNatureProficiency{[%- if character.nature.is_expertise -%]2
                      [%- elif character.nature.is_proficient -%]1
                      [%- elif character.nature.is_jack_of_all_trades -%]0.5
                      [% else %]0[% endif %]}
\SetPerceptionProficiency{[%- if character.perception.is_expertise -%]2
                          [%- elif character.perception.is_proficient -%]1
                          [%-elif character.perception.is_jack_of_all_trades -%]0.5
                          [% else %]0[% endif %]}
\SetPerformanceProficiency{[%- if character.performance.is_expertise -%]2
                           [%- elif character.performance.is_proficient -%]1
                           [%- elif character.performance.is_jack_of_all_trades -%]0.5
                           [% else %]0[% endif %]}
\SetPersuasionProficiency{[%- if character.persuasion.is_expertise -%]2
                          [%- elif character.persuasion.is_proficient -%]1
                          [%- elif character.persuasion.is_jack_of_all_trades -%]0.5
                          [% else %]0[% endif %]}
\SetReligionProficiency{[%- if character.religion.is_expertise -%]2
                        [%- elif character.religion.is_proficient -%]1
                        [%- elif character.religion.is_jack_of_all_trades -%]0.5
                        [% else %]0[% endif %]}
\SetSleightOfHandProficiency{[%- if character.sleight_of_hand.is_expertise -%]2
                             [%- elif character.sleight_of_hand.is_proficient -%]1
                             [%- elif character.sleight_of_hand.is_jack_of_all_trades -%]0.5
                             [%- elif character.sleight_of_hand.is_remarkable_athlete -%]0.5
                             [% else %]0[% endif %]}
\SetStealthProficiency{[%- if character.stealth.is_expertise -%]2
                       [%- elif character.stealth.is_proficient -%]1
                       [%- elif character.stealth.is_jack_of_all_trades -%]0.5
                       [%- elif character.stealth.is_remarkable_athlete -%]0.5
                       [% else %]0[% endif %]}
\SetSurvivalProficiency{[%- if character.survival.is_expertise -%]2
                        [%- elif character.survival.is_proficient -%]1
                        [%- elif character.survival.is_jack_of_all_trades -%]0.5
                        [% else %]0[% endif %]}

\Inspiration{[% if character.inspiration %] $\star$ [% endif %]}
\Proficiency{[[ character.proficiency_bonus ]]}
\Perception{[[ 10 + character.perception.modifier ]]}

\ArmorClass{[[ character.armor_class ]]}
\Initiative{[[ character.initiative.replace("+", "") ]]}
\Speed{[[ character.speed ]]}
\MaxHitPoints{[[ character.hp_max ]]}
[% if character.hp_current %]\CurrentHitPoints{[[ character.hp_current ]]}[% endif %]
[% if character.hp_temp %]\TemporaryHitPoints{[[ character.hp_temp ]]}[% endif %]
\MaxHitDice{[[ character.hit_dice.replace(" ","") ]]}
\CurrentHitDice{[[ character.hit_dice_current| replace(" ", "") ]]}

\CP{[% if character.cp > 0 %][[ character.cp ]][% endif %]}
\SP{[% if character.sp > 0 %][[ character.sp ]][% endif %]}
\GP{[% if character.gp > 0 %][[ character.gp ]][% endif %]}
\EP{[% if character.ep > 0 %][[ character.ep ]][% endif %]}
\PP{[% if character.pp > 0 %][[ character.pp ]][% endif %]}

[% for w in character.weapons %]
\AddWeapon{[[ w.name ]]}{[[ "{:+d}".format(w.attack_modifier) ]]}{[[ "{}/{}".format(w.damage, w.damage_type) ]]}
[% endfor %]

\AttacksAdditional{[%- if character.armor -%]\textbf{Armor}: [[ character.armor ]] \\ [%endif %]
                   [%- if character.shield -%]\textbf{Shield}: [[ character.shield ]] \\ [%endif %]
                   [[- character.attacks_and_spellcasting| boxed -]]}

\OtherProficienciesLanguages{\textbf{Languages:} [[ character.languages ]]. \\
[%- for prof_type, values in character.proficiencies_by_type.items() %]
  [%- if not (prof_type == "Optional" or values == ""): %]
\textbf{[[ prof_type ]]}: [[ values ]]. \\
  [%- endif -%]
[%- endfor -%]
}

\Equipment{[[ character.equipment_text| boxed -]] \\ \footnotesize{[[ character.weight_and_capacity_text| boxed ]]}}

\PersonalityTraits{[[ character.personality_traits ]]}

\Ideals{[[ character.ideals ]]}

\Bonds{[[ character.bonds ]]}

\Flaws{[[ character.flaws ]]}

\FeaturesTraits{[[ character.features_summary| boxed ]]}


% Appearance

\Age{[[ character.age ]]}
\Height{[[ character.height ]]}
\Weight{[[ character.weight ]]}
\Eyes{[[ character.eyes ]]}
\Skin{[[ character.skin ]]}
\Hair{[[ character.hair ]]}

% background

\CharacterAppearance{[[ portrait ]]
[[- character.appearance_text -]]
}
\AdditionalFeaturesAndTraits{[[ character.additional_description ]]}

\Characterbackground{[[ character.backstory ]]}

\Treasure{[[ character.treasure ]]}

\AlliesAndOrganizations{[[ character.allies ]]}

\OrganizationName{[[ character.org_name ]]}

% CHARACTER PAGE
\pdfbookmark[0]{Character Sheet}{Character Sheet}
\rendercharactersheet

% BACKSTORY PAGE
\pdfbookmark[0]{Background Sheet}{Background Sheet}
\renderbackgroundsheet

[% if character.is_spellcaster -%]
% SPELLCASTING PAGE
\pdfbookmark[0]{Spellcasting Sheet}{Spellcasting Sheet}
[[ character| spellsheetparser ]]
[%- endif -%]

\chapter*{[[ title ]]}
[% endif %]
